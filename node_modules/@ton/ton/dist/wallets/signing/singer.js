"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.signPayload = signPayload;
const core_1 = require("@ton/core");
function signPayload(args, signingMessage, packMessage) {
    if ("secretKey" in args) {
        /**
         * Client provider an secretKey to sign transaction.
         */
        const signature = (0, core_1.domainSign)({
            data: signingMessage.endCell().hash(),
            secretKey: args.secretKey,
            domain: args.domain,
        });
        return packMessage(signature, signingMessage);
    }
    else {
        /**
         * Client use external storage for secretKey.
         * In this case lib could create a request to external resource to sign transaction.
         */
        return args
            .signer(signingMessage.endCell())
            .then((signature) => packMessage(signature, signingMessage));
    }
}
